{
  "type": "minecraft:chest",
  "pools": [
    {
      "name": "Spawns with -1 Luck",
      "rolls": 1,
      "entries": [
        {
          "type": "loot_table",
          "name": "dregora:switch/milk_switch",
          "weight": 100
        }
      ]
    },
    {
      "name": "harbor",
      "rolls": {
        "min": 1,
        "max": 1
      },
      "entries": [
        {
          "type": "item",
          "name": "minecraft:written_book",
          "functions": [
            {
              "function": "set_nbt",
              "tag":"
              {
                pages:
                [
                  \"[{\\\"text\\\":\\\"Beneath the ocean waves many secrets await discovery: ancient ships rumored to travel to the stars and beyond, ancient temples with treasures and perhaps the true history of Dregora. I have visited some of these places, found some of\\\"}]\",
                  \"[{\\\"text\\\":\\\"these ancient sunken ruins and gained great wealth by discovering hidden treasures while learning the secret knowledge of the old ways. The old ways which, by the way, were forbidden long ago by the Redcloaks which till this day still exist and\\\"}]\",
                  \"[{\\\"text\\\":\\\"possibly control this world from behind the scenes. I will continue to learn and crack the formula to live 10 lifetimes, like the Redcloaks have done for centuries. Because, unless I am wrong, we are about to enter a time that may change everything.\\\"}]\",
                  \"[{\\\"text\\\":\\\"This is the day I will leave this note, and this trusted village in which I grew up, to find more clues and direct the future towards the best possible outcome.\n\n \\\"}]\"
                ],
                title:\"Secrets of the Ocean\",
                author:\"A Traveler\",
                display:{Lore:[\"Signed by The Traveler\"]}
              }"
            },
            {
              "function": "set_nbt",
              "tag":"
              {
                pages:
                [
                  \"[{\\\"text\\\":\\\"In the dark night of the eleventh night we hear waves hitting the shore, we hear the docks crumbling under the pressure brought by many evil beings, something not as bad as the corrupted, yet something that nobody should experience. As\\\"}]\",
                  \"[{\\\"text\\\":\\\"cannons fire and houses collapse we try to run to safety. Purposely leaving anything of value behind, as this is what they\u0027re after. Yet I carry this ancient sword to protect my family. My children and lovely wife, who they will take away from\\\"}]\",
                  \"[{\\\"text\\\":\\\"me for their own enjoyment. As we run we see the exit is blocked, so we hide in the hope they won\u0027t find us while the sound of their footsteps grow louder and louder...\n \\\"}]\"
                ],
                title:\"Pirates!\",
                author:\"Unknown\",
                display:{Lore:[\"At night they came\"]}
              }",
              "conditions": [{"condition": "random_chance","chance": 0.3}]
            },
            {
              "function": "set_nbt",
              "tag":"
              {
                pages:
                [
                  \"[{\\\"text\\\":\\\"As we carry box by box we\u0027re in a happy mood. Not because the pay is good or because we long to feel the ocean waves carrying the ship to our destination. It\u0027s because we carry a greater purpose to the ships. It may just be rocks and wood\\\"}]\",
                  \"[{\\\"text\\\":\\\"but from these supplies we will build mighty cities in the middle of the oceans from which we will set sail to conquer this world once again. So we sing happily as we go and build our future.\n \\\"}]\"
                ],
                title:\"Let us set sail\",
                author:\"Unknown\",
                display:{Lore:[\"Reclaiming the world.\"]}
              }",
              "conditions": [{"condition": "random_chance","chance": 0.3}]
            },
            {
              "function": "set_nbt",
              "tag":"
              {
                pages:
                [
                  \"[{\\\"text\\\":\\\"We\u0027re hiding while they slowly progress door to door. They\u0027re from a mighty ship without flags. We sit in the corner of my attic while they drag the residents of this harbor out of their houses. Accompanied by tall creatures wearing red and black\\\"}]\",
                  \"[{\\\"text\\\":\\\"cloaks. I couldn\u0027t move a limb as my neighbors screamed and their children were dragged away from them by savage monsters. By the stinking and rotting corrupted. What in Dregora\u0027s name is going on? I wonder what they did to deserve this.\\\"}]\",
                  \"[{\\\"text\\\":\\\"I see the ship take sail, never to be heard of again.\n\n \\\"}]\"
                ],
                title:\"Corrupted Charter\",
                author:\"Unknown\",
                display:{Lore:[\"Taken by the Red Cloaks.\"]}
              }",
              "conditions": [{"condition": "random_chance","chance": 0.3}]
            },
            {
              "function": "set_nbt",
              "tag":"
              {
                pages:
                [
                  \"[{\\\"text\\\":\\\"One day, just like any other, I went fishing. Not like the big shots do it with their fancy nets and fleet of fancy ships. No, simply with a fishing rod, some bait and a lot of patience. It wasn\u0027t till early afternoon once I finally sat within my simple boat\\\"}]\",
                  \"[{\\\"text\\\":\\\"with a bucket of bait. Staring at the ocean, which was surprisingly calm, waiting till I would hook something on my line, I saw a reflection under water so I took a closer look. Deep underwater, impossible to see if it wasn\u0027t for the calmness of the\\\"}]\",
                  \"[{\\\"text\\\":\\\"ocean today, it looked like a piece of metal with guards. A beam? No, that must be a sword. Knowing how much swords can cost I undressed myself and jumped from my boat. Reaching the bottom, I tried to move the sword. Is it me?\\\"}]\",
                  \"[{\\\"text\\\":\\\"Am I growing old? I couldn\u0027t lift the thing an inch so I went back up to grab a rope. After about half an hour I sat on my boat again with the sword next to me, not as heavy as it seemed before. I could just barely lift the bloody thing.\\\"}]\",
                  \"[{\\\"text\\\":\\\"I wonder what it will be worth, as it\u0027s so heavy I don\u0027t think it would be very useful in combat, but we\u0027ll see.\n\n \\\"}]\"
                ],
                title:\"Sword of the Deep\",
                author:\"Unknown\",
                display:{Lore:[\"What lies under the waves.\"]}
              }",
              "conditions": [{"condition": "random_chance","chance": 0.3}]
            }
          ],
          "weight": 1
        }
      ]
    },
    {
      "name": "lucky_totem",
      "rolls": 1,
      "entries": [
        {
          "type": "item",
          "name": "minecraft:totem_of_undying",
          "functions": [
            {
              "function": "minecraft:set_nbt",
              "tag": "{display:{Name:\"Totem of \u00A7l\u00A76Legendary\u00A7r Luck\",Lore:[\"Noice!\"]}}"
            },
            {
              "function": "minecraft:set_attributes",
              "modifiers": [
                {"attribute": "generic.luck", "name": "Luck", "amount":  {"min": 0.69, "max": 1.69}, "operation": "addition", "slot": ["offhand"]},
                {"attribute": "generic.maxHealth", "name": "maxHealth", "amount": {"min": -0.5, "max": -0.9}, "operation": "multiply_total", "slot": ["offhand"]},
                {"attribute": "generic.luck", "name": "Luck", "amount":  {"min": 0.69, "max": 1.69}, "operation": "addition", "slot": ["mainhand"]},
                {"attribute": "generic.maxHealth", "name": "maxHealth", "amount": {"min": -0.5, "max": -0.9}, "operation": "multiply_total", "slot": ["mainhand"]}
              ]
            }
          ],
          "weight": 1
        },
        {
          "type": "item",
          "name": "minecraft:book",
          "functions": [
            {
              "function": "enchant_with_levels",
              "levels": 10,
              "treasure": false
            }
          ],
          "weight": 10
        },
        {
          "type": "loot_table",
          "name": "dregora:loot/empty_loot",
          "weight": 20
        }
      ]
    },
    {
      "name": "harbor_sword",
      "rolls": 1,
      "entries": [
        {
          "type": "item",
          "name": "minecraft:iron_sword",
          "weight": 0,
          "quality": 2,
          "functions": [
            {
              "function": "minecraft:set_nbt",
              "tag": "{display:{Name:\"Sword of the Deep\",Lore:[\"a heavy, magical sword that packs a punch\"]}}"
            },
            {
              "function": "minecraft:enchant_with_levels",
              "levels": 30,
              "treasure": true
            },
            {
              "function": "minecraft:set_attributes",
              "modifiers": [
                {"attribute": "generic.attackSpeed","name": "attackSpeed","amount": 1.6,"operation": "addition","slot": ["mainhand"]},
                {"attribute": "generic.attackDamage","name": "attackDamage","amount": {"min": 6.2, "max": 7.8},"operation": "addition","slot": ["mainhand"]},
                {"attribute": "generic.attackKnockback", "name": "More Knockback", "amount": {"min": 0.1, "max": 0.2}, "operation": "addition", "slot": ["mainhand"]},
                {"attribute": "generic.movementSpeed", "name": "Less Movement Speed", "amount": {"min": -0.1, "max": -0.2}, "operation": "addition", "slot": ["mainhand"]}
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "harbor_sword",
      "rolls": 1,
      "entries": [
        {
          "type": "item",
          "name": "minecraft:iron_sword",
          "weight": 0,
          "quality": 2,
          "functions": [
            {
              "function": "minecraft:set_nbt",
              "tag": "{display:{Name:\"Anchor\",Lore:[\"This sword seems to be too heavy to have been made from just iron.\"]}}"
            },
            {
              "function": "set_nbt",
              "tag": "{ench:[{id:17,lvl:5},{id:19,lvl:2},{id:20,lvl:2},{id:33,lvl:3}]}"
            }
          ]
        },
        {
          "type": "item",
          "name": "minecraft:book",
          "functions": [
            {
              "function": "enchant_with_levels",
              "levels": 5,
              "treasure": false
            }
          ],
          "weight": 0,
          "quality": 2
        }
      ]
    },
    {
      "name": "harbor_loot",
      "rolls": {
        "min": 5,
        "max": 15
      },
      "bonus_rolls": {
        "min": 1,
        "max": 1
      },
      "entries": [
        {
          "type": "item",
          "name": "minecraft:book",
          "functions": [
            {
              "function": "enchant_with_levels",
              "levels": 30,
              "treasure": false
            }
          ],
          "weight": 1
        },
        {
          "type": "item",
          "name": "fishingmadebetter:fishing_rod_wood",
          "functions": [
            {
              "function": "set_damage",
              "damage": {
                "min": 0.50,
                "max": 0.95
              }
            },
            {
              "function": "enchant_with_levels",
              "levels": 20,
              "conditions": [
                {
                  "condition": "random_chance",
                  "chance": 0.1
                }
              ]
            }
          ],
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:carrot_on_a_stick",
          "functions": [
            {
              "function": "set_damage",
              "damage": {
                "min": 0.50,
                "max": 0.95
              }
            }
          ],
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:bow",
          "functions": [
            {
              "function": "set_damage",
              "damage": {
                "min": 0.50,
                "max": 0.95
              }
            }
          ],
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:arrow",
          "functions": [
            {
              "function": "set_count",
              "count": {
                "min": 1,
                "max": 3
              }
            }
          ],
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:flower_pot",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:crafting_table",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:chest",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:dark_oak_boat",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:spruce_boat",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:jungle_boat",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:birch_boat",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:leather",
          "weight": 3
        },
        {
          "type": "item",
          "name": "minecraft:web",
          "weight": 4
        },
        {
          "type": "item",
          "name": "minecraft:ladder",
          "weight": 2
        },
        {
          "type": "item",
          "name": "minecraft:fish",
          "weight": 7,
          "functions": [
            {
              "function": "minecraft:set_data",
              "data": 1,
              "conditions": [
                {
                  "condition": "random_chance",
                  "chance": 0.5
                }
              ]
            },
            {
              "function": "minecraft:set_data",
              "data": 2,
              "conditions": [
                {
                  "condition": "random_chance",
                  "chance": 0.5
                }
              ]
            },
            {
              "function": "minecraft:set_data",
              "data": 3,
              "conditions": [
                {
                  "condition": "random_chance",
                  "chance": 0.5
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}

